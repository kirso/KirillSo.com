---
import PageLayout from "@/layouts/Base";
import BlogPostPreview from "@/components/BlogPostPreview.astro";
import { sortMDByDate } from "src/util";

const meta = {
	title: "Posts",
	description: "A collection of posts by me for a starter Astro theme",
};

let allPosts = await Astro.glob("./*.md");
allPosts = sortMDByDate(allPosts);
---

<PageLayout {meta}>
	<h1 class="text-2xl font-semibold">Writings</h1>
	<section aria-label="Blog post list" class="mt-6">
		<ul class="text-left space-y-8">
			{allPosts.map((p) => (
				<li class="flex flex-wrap gap-2 [&_time]:min-w-[120px] [&_q]:w-full">
					<BlogPostPreview post={p} as="h2" withDesc />
				</li>
			))}
		</ul>
	</section>
</PageLayout>
